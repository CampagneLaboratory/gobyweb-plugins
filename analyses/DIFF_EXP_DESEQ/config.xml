<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<alignmentAnalysisConfig>
    <name>Differential Expression Analysis with DESeq</name>
    <id>DIFF_EXP_DESEQ</id>
    <help>Compares groups of samples to determine set of gene/exon or other annotations differentially expressed across
        groups. Counts are calculated with Goby, statistics of diffential expression are estimated with DESeq.
    </help>
    <supportsTranscriptAlignments>false</supportsTranscriptAlignments>
    <splitProcessCombine>true</splitProcessCombine>
    <producesTabDelimitedOutput>true</producesTabDelimitedOutput>
    <version>1.0</version>

    <requires>
        <resource>
            <id>GOBY</id>
            <version>20111021144833</version>
        </resource>
    </requires>
    <options>
        <option>
            <id>NUM_TOP_HITS</id>
            <name>Number of top hits</name>
            <help>Number of hits to report if no candidates has an adjusted p-value above the q-value threshold.</help>
            <required>true</required>
            <defaultsTo>10000</defaultsTo>
            <type>INTEGER</type>
            <autoFormat>false</autoFormat>
        </option>
        <option>
            <id>Q_VALUE_THRESHOLD</id>
            <name>q-value threshold</name>
            <help>Threshold on q-values to determine if the candidate result should be kept. A candidate is kept if any
                q-value is lower than the threshold.
            </help>
            <required>true</required>
            <defaultsTo>1.0</defaultsTo>
            <type>DOUBLE</type>
            <autoFormat>false</autoFormat>
        </option>
        <!--option>
            <id>TEST1</id>
            <name>q-value threshold</name>
            <help>Threshold on q-values to determine if the candidate result should be kept. A candidate is kept if any
                q-value is lower than the threshold.
            </help>
            <required>true</required>
            <defaultsTo>1.0</defaultsTo>
            <type>DOUBLE</type>
            <flagFormat>&dash;&dash;test1 %s</flagFormat>
            <autoFormat>true</autoFormat>
        </option>

        <option>
            <id>TEST2</id>
            <name>q-value threshold</name>
            <help>Threshold on q-values to determine if the candidate result should be kept. A candidate is kept if any
                q-value is lower than the threshold.
            </help>
            <required>true</required>
            <defaultsTo>true</defaultsTo>
            <type>SWITCH</type>
            <flagFormat>&dash;&dash;test2</flagFormat>
            <autoFormat>true</autoFormat>
        </option>
        <option>
            <id>TEST3_FALSE_SWITCH</id>
            <name>q-value threshold</name>
            <help>Threshold on q-values to determine if the candidate result should be kept. A candidate is kept if any
                q-value is lower than the threshold.
            </help>
            <required>true</required>
            <defaultsTo>false</defaultsTo>
            <type>SWITCH</type>
            <flagFormat>&dash;&dash;test3</flagFormat>
            <autoFormat>true</autoFormat>
        </option>

        <option>
            <id>TEST4_FALSE_BOOLEAN</id>
            <name>q-value threshold</name>
            <help>Threshold on q-values to determine if the candidate result should be kept. A candidate is kept if any
                q-value is lower than the threshold.
            </help>
            <required>true</required>
            <defaultsTo>false</defaultsTo>
            <flagFormat>&dash;&dash;test4 %s</flagFormat>
            <type>BOOLEAN</type>
            <autoFormat>true</autoFormat>
        </option-->
    </options>
    <files>
        <file>
            <id>R_SCRIPT</id>
            <filename>geneDESeqAnalysis.R</filename>
        </file>
        <file>
            <id>PARALLEL_SCRIPT</id>
            <filename>parallel.sh</filename>
            <import-from-plugin>DIFF_EXP_GOBY</import-from-plugin>
        </file>
    </files>
    <output-schema>
        <file>
            <id>STATS_RESULTS</id>
            <name>Statistics</name>
            <required>true</required>
            <mime-type>text/tab-separated-values</mime-type>
            <filename>stats.tsv</filename>
            <help>Statistics of differential expression (generated by the DESeq R package after counts have been
                produced with the goby alignment-to-counts mode).
            </help>
        </file>
        <file>
            <id>GENE_SCATTER_PLOT</id>
            <required>true</required>
            <name>Gene scatter plot</name>
            <mime-type>image/png</mime-type>
            <filename>GENE.png</filename>
            <help>Scatter plot for genes.</help>
        </file>
        <file>
            <id>EXON_SCATTER_PLOT</id>
            <name>Exon scatter plot</name>
            <required>true</required>
            <mime-type>image/png</mime-type>
            <filename>EXON.png</filename>
            <help>Scatter plot for exons.</help>
        </file>
        <file>
            <id>OTHER_SCATTER_PLOT</id>
            <name>Other scatter plot</name>
            <required>true</required>
            <mime-type>image/png</mime-type>
            <filename>OTHER.png</filename>
            <help>Scatter plot for other (intergenic regions).</help>
        </file>
    </output-schema>
</alignmentAnalysisConfig>

